# Text Generation Worker Configuration

name = "text-gen"
main = "index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Worker settings
workers_dev = true

# Rate Limiter Durable Object
[[durable_objects.bindings]]
name = "RATE_LIMITER"
class_name = "RateLimiter"
script_name = "rate-limiter"

# Environment Variables
[vars]
DEFAULT_PROVIDER = "openai"
CONFIG_SERVICE_URL = "https://api.distributedelectrons.com"

# Secrets (set with: wrangler secret put <NAME>)
# - OPENAI_API_KEY
# - ANTHROPIC_API_KEY
# - SPARK_LOCAL_URL (on-prem LLM via Cloudflare Tunnel, e.g., https://spark-llm.your-tunnel.com)
# - SPARK_API_KEY (optional, if Spark requires auth)

# Custom Domain
[[routes]]
pattern = "text.distributedelectrons.com"
custom_domain = true
