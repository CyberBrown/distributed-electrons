# Sandbox Executor Worker Configuration
# Delegates Claude CLI execution to on-prem runner via Cloudflare Tunnel
# Also supports SDK mode via AI Gateway for lightweight queries

name = "sandbox-executor"
main = "src/index.ts"
compatibility_date = "2025-05-06"
compatibility_flags = ["nodejs_compat"]

# Worker settings
workers_dev = true

# Enable observability for debugging
[observability]
enabled = true

# Environment Variables
[vars]
CONFIG_SERVICE_URL = "https://api.distributedelectrons.com"
MAX_EXECUTION_TIME = "300000"

# Secrets (set with: wrangler secret put <NAME>)
# - CF_AIG_TOKEN (for SDK mode via AI Gateway)
# - CLAUDE_RUNNER_URL (on-prem runner URL via Cloudflare Tunnel)
# - RUNNER_SECRET (secret for authenticating with on-prem runner)
# - INTERNAL_API_KEY (for config-service internal API calls)

# Custom Domain (uncomment when ready for production)
# [[routes]]
# pattern = "sandbox.distributedelectrons.com"
# custom_domain = true
